window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({BoosterNode:[function(t,e,o){"use strict";cc._RF.push(e,"b9ecf6NcUpHo6BXjRZtYMMN","BoosterNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/EventHandler"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.count=null,e.icons=new Array,e._booster=null,e.onActiveBooster=new c.Event,e}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._booster.type},enumerable:!1,configurable:!0}),e.prototype.setBooster=function(t){var e=this;this._booster=t,this.icon.spriteFrame=this.icons[t.type-2],this.count.string=""+t.count,t.onChangeCount.add(this.node,function(){e._changeCount()})},e.prototype.onClick=function(){this._booster.count<=0||this.onActiveBooster.dispatch(this._booster.type)},e.prototype._changeCount=function(){this.count.string=""+this._booster.count},r([l(cc.Sprite)],e.prototype,"icon",void 0),r([l(cc.Label)],e.prototype,"count",void 0),r([l([cc.SpriteFrame])],e.prototype,"icons",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../utils/EventHandler":"EventHandler"}],BoostersNode:[function(t,e,o){"use strict";cc._RF.push(e,"d5f7agZn9pI+5M83YQZO4zT","BoostersNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/EventHandler"),s=t("./BoosterNode"),a=cc._decorator,l=a.ccclass,u=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttons=new Array,e.icons=new Array,e.onActiveBooster=new c.Event,e}return i(e,t),e.prototype.setBoosters=function(t){var e=this;this.buttons.forEach(function(o,n){var i=o.getComponent(s.default);i.setBooster(t.boosters[n]),i.onActiveBooster.add(e.node,function(t){return e.onActiveBooster.dispatch(t)})})},e.prototype.selectBooster=function(t){var e=this.buttons.find(function(e){return e.getComponent(s.default).type==t});this.buttons.forEach(function(t){return t.scale=1}),e.scale=1.1},e.prototype.disableBooster=function(){this.buttons.forEach(function(t){return t.scale=1})},r([u([cc.Node])],e.prototype,"buttons",void 0),r([u([cc.SpriteFrame])],e.prototype,"icons",void 0),r([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../utils/EventHandler":"EventHandler","./BoosterNode":"BoosterNode"}],Boosters:[function(t,e,o){"use strict";cc._RF.push(e,"77b1bIECOJHQJ08DK+55T9O","Boosters"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoostersController=o.Booster=void 0;var n=t("../Global"),i=t("../utils/EventHandler"),r=t("./Tile"),c=function(){function t(){this._count=0,this.onChangeCount=new i.Event}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t},enumerable:!1,configurable:!0}),t.prototype.decrementCount=function(){this._count--,this.onChangeCount.dispatch()},t}();o.Booster=c;var s=function(){function t(){var t=this;this.boostersList=[],this._boosters=[],this.boostersList.push(r.TileState.Bomb,r.TileState.Mix),this.boostersList.forEach(function(e){var o=new c;o.type=e,o.count=n.default.config.defaultBoosterCount,t._boosters.push(o)})}return Object.defineProperty(t.prototype,"boosters",{get:function(){return this._boosters},enumerable:!1,configurable:!0}),t.prototype.decremenBoosterCount=function(t){this._findBooster(t).decrementCount()},t.prototype._findBooster=function(t){return this._boosters.find(function(e){return e.type==t})},t}();o.BoostersController=s,cc._RF.pop()},{"../Global":"Global","../utils/EventHandler":"EventHandler","./Tile":"Tile"}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"b2fac2Swm9Lb5WO2g1qt0DQ","Config"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(){this.gridSize=cc.v2(8,8),this.loadSceneDelay=10,this.defaultMoves=10,this.defaultScoreToWin=100,this.bombRemoveArea=1,this.bombCreateSize=5,this.mixSize=3,this.defaultBoosterCount=1},cc._RF.pop()},{}],EndGameNode:[function(t,e,o){"use strict";cc._RF.push(e,"736d1njeCFPC69JHOZ20p2y","EndGameNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.EndGameNode=void 0;var c=t("../model/Stats"),s=t("../utils/EventHandler"),a=cc._decorator,l=a.ccclass,u=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Label=null,e.onEnd=new s.Event,e}return i(e,t),e.prototype.setEndType=function(t){this.Label.string=t==c.EndGameType.Win?"YOU WIN":"YOU LOSE"},e.prototype.onClick=function(){cc.log("[LOG]ENDGAME"),this.onEnd.dispatch()},r([u(cc.Label)],e.prototype,"Label",void 0),r([l],e)}(cc.Component);o.EndGameNode=d,cc._RF.pop()},{"../model/Stats":"Stats","../utils/EventHandler":"EventHandler"}],EventHandler:[function(t,e,o){"use strict";cc._RF.push(e,"c8dbbKW2p1OZ48LEdDPA6SA","EventHandler"),Object.defineProperty(o,"__esModule",{value:!0}),o.Event=o.EventHandler=void 0;var n=function(){function t(t,e){this.owner=null,this.isComponent=!1,this.cbOnEvent=null,this.owner=t,this.cbOnEvent=e,this.isComponent=t instanceof cc.Component}return t.prototype.onEvent=function(t){this.cbOnEvent(t)},t}();o.EventHandler=n;var i=function(){function t(){this._handlers=new Array}return t.prototype.add=function(t,e){var o=t instanceof n?t:new n(t,e);this._handlers.push(o)},t.prototype.dispatch=function(t){return this._handlers.filter(function(t){return null!=t.owner.node&&t.owner.node.isValid}),this._handlers.forEach(function(e){return e.onEvent(t)}),!0},t}();o.Event=i,cc._RF.pop()},{}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"a6a81WQcIROiaW/OqWeam5J","GameScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),s=t("../model/Boosters"),a=t("../model/Stats"),l=t("../nodes/BoostersNode"),u=t("../nodes/EndGameNode"),d=t("../nodes/GridNode"),p=t("../nodes/ui/StatsBarNode"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.statsBarPrefab=null,e.gridPrefab=null,e.boostersPrefab=null,e.endGamePrefab=null,e.statsBarPosition=null,e.gridPosition=null,e.boostersPosition=null,e.endGamePosition=null,e.blackScreen=null,e._gridNode=null,e._statsNode=null,e._stats=null,e._boostersNode=null,e._boostersController=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this,e=cc.instantiate(this.statsBarPrefab);this._statsNode=e.getComponent(p.default),this._stats=new a.Stats(c.default.config.defaultScoreToWin,c.default.config.defaultMoves),this._statsNode.init(this._stats),this.statsBarPosition.addChild(e),this._setBooters(),this._createGrid(),this._gridNode.onGridChanged.add(this.node,function(e){return t._stats.changeStats(e)}),this._stats.onEndGame.add(this.node,function(e){return t._onEndGame(e)}),this._gridNode.onAddBooster.add(this.node,function(e){return t._boostersController.decremenBoosterCount(e)})},e.prototype._createGrid=function(){var t=this,e=cc.instantiate(this.gridPrefab);this._gridNode=e.getComponent(d.GridNode),this._gridNode.createGrid(),this.gridPosition.addChild(e),this._gridNode.onAnimationCompleted.add(this.node,function(){t._gridNode.isSelectBooster?t._gridNode.removeBlock():t._boostersNode.getComponent(l.default).disableBooster()})},e.prototype._setBooters=function(){var t=this;this._boostersController=new s.BoostersController;var e=cc.instantiate(this.boostersPrefab);e.getComponent(l.default).setBoosters(this._boostersController),e.getComponent(l.default).onActiveBooster.add(this.node,function(e){t._gridNode.selectBooster(e),t._boostersNode.getComponent(l.default).selectBooster(e)}),this._boostersNode=e,this.boostersPosition.addChild(e)},e.prototype._onEndGame=function(t){var e=this,o=cc.instantiate(this.endGamePrefab);o.getComponent(u.EndGameNode).setEndType(t),o.getComponent(u.EndGameNode).onEnd.add(this.node,function(){var t=cc.tween(o).by(.1,{scale:.1}).to(.2,{scale:0}).start(),n=cc.tween(e.blackScreen).to(2,{opacity:255}).call(function(){return cc.director.loadScene("MenuScene")}).start();cc.tween(e.blackScreen).sequence(t,cc.tween(e.blackScreen).delay(.2),n)}),this.blackScreen.active=!0,this.blackScreen.opacity=200,this.blackScreen.addChild(o)},r([_(cc.Prefab)],e.prototype,"statsBarPrefab",void 0),r([_(cc.Prefab)],e.prototype,"gridPrefab",void 0),r([_(cc.Prefab)],e.prototype,"boostersPrefab",void 0),r([_(cc.Prefab)],e.prototype,"endGamePrefab",void 0),r([_(cc.Node)],e.prototype,"statsBarPosition",void 0),r([_(cc.Node)],e.prototype,"gridPosition",void 0),r([_(cc.Node)],e.prototype,"boostersPosition",void 0),r([_(cc.Node)],e.prototype,"endGamePosition",void 0),r([_(cc.Node)],e.prototype,"blackScreen",void 0),r([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Global":"Global","../model/Boosters":"Boosters","../model/Stats":"Stats","../nodes/BoostersNode":"BoostersNode","../nodes/EndGameNode":"EndGameNode","../nodes/GridNode":"GridNode","../nodes/ui/StatsBarNode":"StatsBarNode"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"f5c87NmSp1ABK6H0fvLN7xa","Global"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./animations/TileAnimations"),i=t("./cfg/Config"),r=t("./model/Stats"),c=function(){function t(){this.init=function(){return new Promise(function(e){t._instance._config=new i.default,t._instance._stats=new r.Stats(t.config.defaultScoreToWin,t.config.defaultMoves),t._instance._tileAnimationController=new n.TileAnimationController,e()})}}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(this._instance=new t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"config",{get:function(){return this._instance._config},enumerable:!1,configurable:!0}),Object.defineProperty(t,"stats",{get:function(){return this._instance._stats},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tileAnimation",{get:function(){return t._instance._tileAnimationController},enumerable:!1,configurable:!0}),t}();o.default=c,cc._RF.pop()},{"./animations/TileAnimations":"TileAnimations","./cfg/Config":"Config","./model/Stats":"Stats"}],GridNode:[function(t,e,o){"use strict";cc._RF.push(e,"db39aJnw4pN7p3wHYsBO2o8","GridNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GridNode=void 0;var a=t("../Global"),l=t("../model/Grid"),u=t("../utils/EventHandler"),d=t("./TileNode"),p=cc._decorator,f=p.ccclass,h=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view=null,e.tilePrefab=null,e.noStepNode=null,e.onAnimationCompleted=new u.Event,e.onGridChanged=new u.Event,e.onAddBooster=new u.Event,e._tileSize=0,e}return i(e,t),Object.defineProperty(e.prototype,"isSelectBooster",{get:function(){return this._grid.isSelectBooster},enumerable:!1,configurable:!0}),e.prototype.removeBlock=function(){this._grid.removeBlock()},e.prototype.getTileNode=function(t){return this.view.children.find(function(e){var o=e.getComponent(d.default);return o.tile.position.x==t.position.x&&o.tile.position.y==t.position.y}).getComponent(d.default)},e.prototype.createGrid=function(){var t=this;this.noStepNode.active=!1,this._grid=new l.Grid(a.default.config.gridSize),this._tileSize=this.tilePrefab.data.getContentSize().width,this._grid.currentGrid.forEach(function(e){return e.forEach(function(e){return t.createTile(e)})}),this._grid.onGridChanged.add(this.node,function(e){t._gridChange(e),!e.needMix&&t.onGridChanged.dispatch(e.removedTiles.length)}),this._grid.onAddBooster.add(this.node,function(e){t.changeTile(e),t.onAddBooster.dispatch(e.state)}),this._grid.onNeedMix.add(this.node,function(){t._noStepsAnimation()})},e.prototype.createTile=function(t){var e=cc.instantiate(this.tilePrefab);e.getComponent(d.default).setInfo(t),e.setContentSize,e.setPosition(t.position.y*this._tileSize,-t.position.x*this._tileSize),this.view.addChild(e)},e.prototype.changeTile=function(t){this.getTileNode(t).updateTileIconAnimation(),this.onAnimationCompleted.dispatch()},e.prototype.selectBooster=function(t){this._grid.waitTileSelectionBooster(t)},e.prototype._gridChange=function(t){return c(this,void 0,void 0,function(){var e=this;return s(this,function(o){switch(o.label){case 0:return[4,Promise.all(t.removedTiles.map(function(t){return e.getTileNode(t).removingAnimation()}))];case 1:return o.sent(),t.activeTile.isBooster?[4,this.getTileNode(t.activeTile).bombAnimation()]:[3,3];case 2:o.sent(),o.label=3;case 3:return[4,Promise.all(t.dropTiles.map(function(t){return e.getTileNode(t).dropingAnimation()}))];case 4:return o.sent(),[4,Promise.all(t.removedTiles.map(function(t){return e.getTileNode(t).updateIcon()}))];case 5:return o.sent(),[4,Promise.all(t.removedTiles.map(function(t){return e.getTileNode(t).emergenceAnimation()}))];case 6:return o.sent(),this.onAnimationCompleted.dispatch(t.needMix),this.removeBlock(),[2]}})})},e.prototype._noStepsAnimation=function(){var t=this.noStepNode;cc.tween(t).call(function(){t.active=!0,t.opacity=255,t.scale=0}).to(1,{scale:1.1}).to(1,{scale:1})},r([h(cc.Node)],e.prototype,"view",void 0),r([h(cc.Prefab)],e.prototype,"tilePrefab",void 0),r([h(cc.Node)],e.prototype,"noStepNode",void 0),r([f],e)}(cc.Component);o.GridNode=_,cc._RF.pop()},{"../Global":"Global","../model/Grid":"Grid","../utils/EventHandler":"EventHandler","./TileNode":"TileNode"}],GridUtils:[function(t,e,o){"use strict";var n;cc._RF.push(e,"e3c05+UbHZDSJJ3XZ3BZJIg","GridUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.GridRemover=o.GridUtils=o.GridAct=void 0,function(t){t[t.Mix=0]="Mix",t[t.Drop=1]="Drop",t[t.Fill=2]="Fill",t[t.Find=3]="Find",t[t.Remove=4]="Remove"}(n=o.GridAct||(o.GridAct={}));var i=function(){function t(){this._mixer=new r,this._dropper=new c,this._filler=new s,this._finder=new a,this._remover=new l}return t.prototype.doAct=function(t,e,o){switch(o){case n.Mix:return this._mixer.mix(t,e);case n.Drop:return this._dropper.drop(t,e);case n.Fill:return this._filler.fill(t,e);case n.Find:return this._finder.find(t,e);case n.Remove:return this._remover.remove(t,e);default:return t}},t}();o.GridUtils=i;var r=function(){function t(){}return t.prototype.mix=function(t,e){var o=t,n=[];o.forEach(function(t){return n=n.concat(t)}),this._mix(n);var i=this._chunkArray(n,e.x);return o=i,function(){for(var t=0;t<e.x;t++)for(var n=0;n<e.y;n++)o[t][n].updatePos(cc.v2(t,n))}(),o},t.prototype._mix=function(t){for(var e,o=t.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));e=[t[n],t[o]],t[o]=e[0],t[n]=e[1]}},t.prototype._chunkArray=function(t,e){return t.length>e?[t.slice(0,e),this._chunkArray(t.slice(e),e)]:[t]},t}(),c=function(){function t(){this._rowsCount=0,this._columnCount=0,this._grid=[]}return t.prototype.drop=function(t,e){return this._grid=t,this._rowsCount=e.x,this._columnCount=e.y,this._dropGrid()},t.prototype._dropGrid=function(){for(var t=[],e=this._rowsCount-2;e>=0;e--)for(var o=0;o<this._columnCount;o++){var n=this._emptySpaces(e,o),i=this._getTile(cc.v2(e,o));i.isNormal&&n>0&&(t.push(i),this._tileExchange(i.position,cc.v2(e+n,o)))}return t},t.prototype._getTile=function(t){return this._grid[t.x][t.y]},t.prototype._tileExchange=function(t,e){var o=this,n=function(t,e){o._grid[t.x][t.y]=e,o._grid[t.x][t.y].updatePos(cc.v2(t.x,t.y))},i=Object.assign(this._grid[t.x][t.y]);n(t,this._getTile(e)),n(e,i)},t.prototype._emptySpaces=function(t,e){var o=0;if(t!=this._rowsCount)for(var n=t+1;n<this._rowsCount;n++)this._getTile(cc.v2(n,e)).removed&&o++;return o},t}(),s=function(){function t(){this._rowsCount=0,this._columnCount=0,this._grid=[]}return t.prototype.fill=function(t,e){return this._grid=t,this._rowsCount=e.x,this._columnCount=e.y,this._fillGrid(),this._grid},t.prototype._emptySpaces=function(t,e){var o=0;if(t!=this._rowsCount)for(var n=t+1;n<this._rowsCount;n++)this._getTile(cc.v2(n,e)).removed&&o++;return o},t.prototype._getTile=function(t){return this._grid[t.x][t.y]},t.prototype._fillGrid=function(){for(var t=0;t<this._columnCount;t++)if(this._grid[0][t].removed)for(var e=this._emptySpaces(0,t)+1,o=0;o<e;o++)this._grid[o][t].updateState()},t}(),a=function(){function t(){var t=this;this._connectedTilesArray=[],this._grid=[],this._isCheckTile=function(e){return null!=t._connectedTilesArray.find(function(t){return t.position.x===e.position.x&&t.position.y===e.position.y})},this._isValidPick=function(e){var o;return null!=(null===(o=t._grid[e.x])||void 0===o?void 0:o[e.y])}}return t.prototype.find=function(t,e){return this._grid=t,this._getConnectedTiles(e)},t.prototype._getTile=function(t){return this._grid[t.x][t.y]},t.prototype._findTilesChain=function(t,e){if(this._isValidPick(t)){var o=this._getTile(t);o.removed||o.color!=e||this._isCheckTile(o)||(this._connectedTilesArray.push(o),this._findTilesChain(cc.v2(t.x+1,t.y),e),this._findTilesChain(cc.v2(t.x-1,t.y),e),this._findTilesChain(cc.v2(t.x,t.y+1),e),this._findTilesChain(cc.v2(t.x,t.y-1),e))}},t.prototype._getConnectedTiles=function(t){this._connectedTilesArray=[];var e=this._getTile(t).color;return this._findTilesChain(t,e),this._connectedTilesArray},t}(),l=function(){function t(){var t=this;this._connectedTilesArray=[],this._grid=[],this._isValidPick=function(e){var o;return null!=(null===(o=t._grid[e.x])||void 0===o?void 0:o[e.y])}}return t.prototype.remove=function(t,e){return this._grid=t,this._connectedTilesArray=[],this._findLeft(e,1),this._findRight(e,1),this._connectedTilesArray},t.prototype._getTile=function(t){return this._grid[t.x][t.y]},t.prototype._findLeft=function(t,e){for(var o=t.x;o<=t.x+e;o++){for(var n=t.y-e;n<=t.y;n++)this._addTile(o,n);for(n=t.y;n<=t.y+e;n++)this._addTile(o,n)}},t.prototype._findRight=function(t,e){for(var o=t.x-e;o<=t.x;o++){for(var n=t.y;n<=t.y+e;n++)this._addTile(o,n);for(n=t.y-e;n<=t.y;n++)this._addTile(o,n)}},t.prototype._addTile=function(t,e){if(this._isValidPick(cc.v2(t,e))){var o=this._getTile(cc.v2(t,e));this._connectedTilesArray.push(o)}},t}();o.GridRemover=l,cc._RF.pop()},{}],Grid:[function(t,e,o){"use strict";cc._RF.push(e,"34b19EXV3tBI69PgkgC/zR7","Grid"),Object.defineProperty(o,"__esModule",{value:!0}),o.Grid=o.GridChangesInfo=o.GridChangesType=o.GridState=void 0;var n,i,r=t("../Global"),c=t("../utils/EventHandler"),s=t("./GridUtils"),a=t("./Tile");(function(t){t[t.NotReady=0]="NotReady",t[t.Ready=1]="Ready",t[t.Move=2]="Move",t[t.SelectBooster=3]="SelectBooster"})(n=o.GridState||(o.GridState={})),function(t){t[t.None=0]="None",t[t.Normal=1]="Normal",t[t.Booster=2]="Booster",t[t.Reshuffle=3]="Reshuffle"}(i=o.GridChangesType||(o.GridChangesType={}));var l=function(){this.type=i.None,this.needMix=!1};o.GridChangesInfo=l;var u=function(){function t(t){var e=this;this._size=null,this._currentGrid=[],this._connectedTilesArray=[],this._gridChangesInfo=new l,this._state=n.NotReady,this._gridUtils=new s.GridUtils,this._selectBoosterType=null,this.onGridChanged=new c.Event,this.onAddBooster=new c.Event,this.onNeedMix=new c.Event,this._isValidPick=function(t){var o;return null!=(null===(o=e._currentGrid[t.x])||void 0===o?void 0:o[t.y])},this._size=t,this._addTiles()}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsCount",{get:function(){return this._size.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnCount",{get:function(){return this._size.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentGrid",{get:function(){return this._currentGrid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectedTilesArray",{get:function(){return this._connectedTilesArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBlock",{get:function(){return this._state==n.Move},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSelectBooster",{get:function(){return this._state==n.SelectBooster},enumerable:!1,configurable:!0}),t.prototype.removeBlock=function(){this._state=n.Ready},t.prototype.waitTileSelectionBooster=function(t){this._state=n.SelectBooster,this._selectBoosterType=t},t.prototype._getTile=function(t){if(this._isValidPick(t))return this._currentGrid[t.x][t.y]},t.prototype._canMove=function(t){var e=this._gridUtils.doAct(this._currentGrid,t.position,s.GridAct.Find).length>2;return e||(t.noCombo.dispatch(),this._state=n.Ready),e},t.prototype._addTiles=function(){for(var t=this,e=0;e<this.size.x;e++){this.currentGrid.push([]);for(var o=function(o){var r=new a.Tile(cc.v2(e,o));r.onTileClick.add(i,function(){if(!t.isBlock){if(t.isSelectBooster)return t._state=n.Move,void t._selectBooster(r);t._findNeedMix()&&(t._mixGrid(),r.createBooster(a.TileState.Mix),t._changeCurrentGrid(r),t.onNeedMix.dispatch()),t._state=n.Move,t._changeCurrentGrid(r)}}),i.currentGrid[e].push(r)},i=this,r=0;r<this.size.y;r++)o(r)}this._mixGrid()},t.prototype._findNeedMix=function(){for(var t=0;t<this.size.x;t++)for(var e=0;e<this.size.y;e++){var o=cc.v2(t,e);if(this._gridUtils.doAct(this._currentGrid,o,s.GridAct.Find).length>2)return!1}return!0},t.prototype._mixGrid=function(t){if(void 0===t&&(t=!1),t&&this._findNeedMix()){var e=this._gridUtils.doAct(this._currentGrid,this.size,s.GridAct.Mix);this._currentGrid=e}},t.prototype._changeCurrentGrid=function(t){if(t.isBooster||this._canMove(t)){var e=t.isBooster?i.Booster:i.Normal;this._gridChangesInfo.activeTile=t,this._gridChangesInfo.type=e,this._gridChangesInfo.removedTiles=this._boosterAction(t),this._gridChangesInfo.needMix=t.isMix,e!=i.Booster&&this._createBomb(t,this._gridChangesInfo.removedTiles.length);var o=this._gridUtils.doAct(this.currentGrid,this.size,s.GridAct.Drop);this._gridChangesInfo.dropTiles=o;var n=this._gridUtils.doAct(this.currentGrid,this.size,s.GridAct.Fill);this._currentGrid=n,this.onGridChanged.dispatch(this._gridChangesInfo),this._gridChangesInfo=new l}},t.prototype._removeTiles=function(t){var e=this,o=[];return this._gridUtils.doAct(this._currentGrid,t.position,s.GridAct.Find).forEach(function(t){var n=e._getTile(t.position);o=o.concat(e._getRemoveTiles(n))}),o},t.prototype._getRemoveTiles=function(t){return t.remove(),[t]},t.prototype._getRemoveTilesBomb=function(t){r.default.config.bombRemoveArea;var e=this._gridUtils.doAct(this._currentGrid,t.position,s.GridAct.Remove);return e.forEach(function(t){return t.remove()}),e},t.prototype._selectBooster=function(t){this._getTile(t.position).state=this._selectBoosterType,this._state=n.Ready,this._selectBoosterType=null,this.onAddBooster.dispatch(t)},t.prototype._createBomb=function(t,e){e<r.default.config.bombCreateSize||t.createBooster(a.TileState.Bomb)},t.prototype._boosterAction=function(t){if(t.isBomb)return this._getRemoveTilesBomb(t);if(t.isMix){var e=[];return this._currentGrid.forEach(function(t){return e=e.concat(t)}),e.forEach(function(t){return t.remove()}),e}return this._removeTiles(t)},t}();o.Grid=u,cc._RF.pop()},{"../Global":"Global","../utils/EventHandler":"EventHandler","./GridUtils":"GridUtils","./Tile":"Tile"}],MenuScene:[function(t,e,o){"use strict";cc._RF.push(e,"e864bDXErpLUrF+qF9eWUAm","MenuScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startButtonNode=null,e.raitingButtonNode=null,e.blackScreen=null,e}return i(e,t),e.prototype.start=function(){var t=this;this.blackScreen.active=!0,cc.tween(this.blackScreen).delay(.3).to(.5,{opacity:0}).call(function(){return t.blackScreen.active=!1}).start()},e.prototype.onStartButton=function(){cc.director.loadScene("GameScene")},e.prototype.onRaitingButton=function(){},r([a(cc.Node)],e.prototype,"startButtonNode",void 0),r([a(cc.Node)],e.prototype,"raitingButtonNode",void 0),r([a(cc.Node)],e.prototype,"blackScreen",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],StatsBarNode:[function(t,e,o){"use strict";cc._RF.push(e,"fb900avwUhDPJNHmPpWr5IX","StatsBarNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveLabel=null,e.scoreLabel=null,e.scoreToWinLabel=null,e}return i(e,t),e.prototype.init=function(t){var e=this;this._stats=t,this._stats.onStatsUpdated.add(this.node,function(){return e.updateNode()}),this.updateNode()},e.prototype.updateNode=function(){this.scoreLabel.string=""+this._stats.score,this.moveLabel.string=""+this._stats.moves,this.scoreToWinLabel.string=""+this._stats.scoreToWin},r([a(cc.Label)],e.prototype,"moveLabel",void 0),r([a(cc.Label)],e.prototype,"scoreLabel",void 0),r([a(cc.Label)],e.prototype,"scoreToWinLabel",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Stats:[function(t,e,o){"use strict";cc._RF.push(e,"cd0eekAH/xFR6sclGVpqh08","Stats"),Object.defineProperty(o,"__esModule",{value:!0}),o.Stats=o.EndGameType=void 0;var n,i=t("../utils/EventHandler");(function(t){t[t.Win=0]="Win",t[t.Lose=1]="Lose"})(n=o.EndGameType||(o.EndGameType={}));var r=function(){function t(t,e){this._score=0,this._scoreToWin=0,this._moves=0,this.onStatsUpdated=new i.Event,this.onEndGame=new i.Event,this._scoreToWin=t,this._moves=e,this._score=0}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moves",{get:function(){return this._moves},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scoreToWin",{get:function(){return this._scoreToWin},enumerable:!1,configurable:!0}),t.prototype.changeStats=function(t){0!=t&&(this._score+=t,this._moves--,this.checkEndGame(),this.onStatsUpdated.dispatch())},t.prototype.checkEndGame=function(){this._score>=this._scoreToWin?this.onEndGame.dispatch(n.Win):0==this._moves&&this.onEndGame.dispatch(n.Lose)},t}();o.Stats=r,cc._RF.pop()},{"../utils/EventHandler":"EventHandler"}],SyncScene:[function(t,e,o){"use strict";cc._RF.push(e,"d6bfbu4Ox9LiquEEptAMqdj","SyncScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blackScreen=null,e}return i(e,t),e.prototype.start=function(){var t=this;c.default.instance.init().then(function(){return t._preload()}).then(function(){return cc.director.loadScene("MenuScene")})},e.prototype._preload=function(){var t=this;return new Promise(function(e){setTimeout(function(){cc.tween(t.blackScreen).call(function(){return cc.director.preloadScene("MenuScene")}).to(.5,{opacity:255}).call(e).start()},1e3)})},r([l(cc.Node)],e.prototype,"blackScreen",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Global":"Global"}],TileAnimations:[function(t,e,o){"use strict";var n;cc._RF.push(e,"3de8a7qi4ZIyowH6STs6com","TileAnimations"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileAnimationController=o.TileAnimationType=void 0,function(t){t[t.NoConnected=0]="NoConnected",t[t.Removing=1]="Removing",t[t.Droping=2]="Droping",t[t.Emergence=3]="Emergence",t[t.CreateBomb=4]="CreateBomb",t[t.BombEmergence=5]="BombEmergence",t[t.MixAnimation=6]="MixAnimation"}(n=o.TileAnimationType||(o.TileAnimationType={}));var i=function(){function t(){var t=this;this._tileSize=0,this._tile=null,this._removing=function(){return new Promise(function(e){var o=t._tile.node,n=cc.tween().to(.1,{scale:0});cc.tween(o).then(n).call(function(){o.opacity=0,o.scale=1}).call(e).start()})},this._droping=function(){return new Promise(function(e){var o=t._tile.node,n=cc.v3(t._tile.tilePosition.y*t._tileSize,-t._tile.tilePosition.x*t._tileSize);cc.tween(o).delay(.01).to(.4,{position:n},{easing:"fade"}).call(e).start()})},this._emergence=function(){return new Promise(function(e){var o=t._tile.node,n=cc.v3(t._tile.tilePosition.y*t._tileSize,-t._tile.tilePosition.x*t._tileSize),i=cc.v3(t._tile.tilePosition.y*t._tileSize,cc.winSize.height/2,0);cc.tween(o).call(function(){o.opacity=255,o.scale=1,o.position=i}).delay(.01).to(.6,{position:n},{easing:"circInOut"}).call(e).start()})},this._createBomb=function(){return new Promise(function(e){var o=t._tile.node,n=cc.tween().to(.1,{scale:1.1}).to(.1,{scale:1});cc.tween(o).call(function(){t._tile.isNormal&&(t._tile.tileIcon.spriteFrame=t._tile.boosterIcons[t._tile.tile.state-2]),o.scale=0,o.opacity=255}).then(n).call(e).start()})},this._bombEmergence=function(){return new Promise(function(e){var o=t._tile.node;o.opacity=255,o.scale=1,cc.tween(o).call(function(){o.opacity=255,o.scale=1}).call(e).start()})},this._mixAnimation=function(){return new Promise(function(e){var o=cc.v3(t._tile.tilePosition.y*t._tileSize,-t._tile.tilePosition.x*t._tileSize),n=t._tile.node;cc.tween(n).to(.2,{scale:0}).call(function(){n.position=o}).delay(.2).to(.2,{scale:1}).call(e).start()})}}return t.prototype.animate=function(t,e){switch(this._tile=t,this._tileSize=t.size,e){case n.NoConnected:return this._noConnected();case n.Removing:return this._removing();case n.Droping:return this._droping();case n.Emergence:return this._emergence();case n.CreateBomb:return this._createBomb();case n.BombEmergence:return this._bombEmergence();case n.MixAnimation:return this._mixAnimation();default:cc.log("No valid animation!")}},t.prototype._noConnected=function(){var t=this._tile.node;cc.tween(t).to(.08,{angle:30}).to(.08,{angle:-30}).to(.08,{angle:0}).start()},t}();o.TileAnimationController=i,cc._RF.pop()},{}],TileNode:[function(t,e,o){"use strict";cc._RF.push(e,"a2567nEQPRAYLhHwEzKj6dv","TileNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../animations/TileAnimations"),l=t("../Global"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tileIcon=null,e.icons=new Array,e.boosterIcons=new Array,e._tile=null,e}return i(e,t),Object.defineProperty(e.prototype,"tile",{get:function(){return this._tile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNormal",{get:function(){return this._tile.isNormal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBooster",{get:function(){return this._tile.isBooster},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._tile.color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this._tile.position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.node.getContentSize().width},enumerable:!1,configurable:!0}),e.prototype.setInfo=function(t){this._tile=t},e.prototype.updateIcon=function(){return c(this,void 0,void 0,function(){return s(this,function(){return this._tile.isNormal&&!this._tile.isBooster&&(this.tileIcon.spriteFrame=this.icons[this.color]),[2]})})},e.prototype.onLoad=function(){var t=this;this.tileIcon.spriteFrame=this.icons[this.color],this._tile.noCombo.add(this.node,function(){return t.noConnectedAnimation()})},e.prototype.updateTileIconAnimation=function(){this.tileIcon.spriteFrame=this.boosterIcons[this._tile.state-2]},e.prototype.onClick=function(){this._tile.onClick()},e.prototype.noConnectedAnimation=function(){return l.default.tileAnimation.animate(this,a.TileAnimationType.NoConnected)},e.prototype.removingAnimation=function(){return l.default.tileAnimation.animate(this,a.TileAnimationType.Removing)},e.prototype.dropingAnimation=function(){return l.default.tileAnimation.animate(this,a.TileAnimationType.Droping)},e.prototype.emergenceAnimation=function(){var t=this.isBooster?a.TileAnimationType.BombEmergence:a.TileAnimationType.Emergence;return l.default.tileAnimation.animate(this,t)},e.prototype.bombAnimation=function(){return l.default.tileAnimation.animate(this,a.TileAnimationType.CreateBomb)},e.prototype.mixAnimation=function(){return l.default.tileAnimation.animate(this,a.TileAnimationType.MixAnimation)},r([p(cc.Sprite)],e.prototype,"tileIcon",void 0),r([p([cc.SpriteFrame])],e.prototype,"icons",void 0),r([p([cc.SpriteFrame])],e.prototype,"boosterIcons",void 0),r([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Global":"Global","../animations/TileAnimations":"TileAnimations"}],Tile:[function(t,e,o){"use strict";cc._RF.push(e,"5faf59mqLREGJEgfKUsZKAy","Tile"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tile=o.TileState=o.TileColor=void 0;var n,i,r=t("../utils/EventHandler");(function(t){t[t.Blue=0]="Blue",t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Orange=3]="Orange",t[t.Violet=4]="Violet"})(n=o.TileColor||(o.TileColor={})),function(t){t[t.Empty=0]="Empty",t[t.Normal=1]="Normal",t[t.Bomb=2]="Bomb",t[t.Mix=3]="Mix",t[t.Rocket=4]="Rocket"}(i=o.TileState||(o.TileState={}));var c=function(){function t(t){this.onTileClick=new r.Event,this.onStateUpdated=new r.Event,this.noCombo=new r.Event,this._position=t,this._color=this.getRandomTile(),this._state=i.Normal}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"removed",{get:function(){return this._state==i.Empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNormal",{get:function(){return this._state!=i.Empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBooster",{get:function(){return this._state==i.Bomb||this._state==i.Mix||this._state==i.Rocket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBomb",{get:function(){return this._state==i.Bomb},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMix",{get:function(){return this._state==i.Mix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRocket",{get:function(){return this._state==i.Rocket},enumerable:!1,configurable:!0}),t.prototype.getRandomTile=function(){var t=n.Blue,e=n.Violet;return Math.floor(Math.random()*(e-t+1))+t},t.prototype.updateState=function(){this._state=i.Normal,this._color=this.getRandomTile(),this.onStateUpdated.dispatch()},t.prototype.onClick=function(){this.onTileClick.dispatch()},t.prototype.remove=function(){this.state=i.Empty},t.prototype.updatePos=function(t){this._position=t},t.prototype.createBooster=function(t){this._state=t},t}();o.Tile=c,cc._RF.pop()},{"../utils/EventHandler":"EventHandler"}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"1e263aM/ZVCJbAOfiOeanKj","Timer"),Object.defineProperty(o,"__esModule",{value:!0}),o.Timer=void 0;o.Timer=function(t,e){cc.tween(this).delay(t).call(e).start()},cc._RF.pop()},{}]},{},["Global","TileAnimations","Config","Boosters","Grid","GridUtils","Stats","Tile","BoosterNode","BoostersNode","EndGameNode","GridNode","TileNode","StatsBarNode","GameScene","MenuScene","SyncScene","EventHandler","Timer"]);